#include <stdio.h>
#include <math.h>
#include <stdlib.h>
#include <time.h>

// Função para calcular a probabilidade de captura
double calcularProbabilidadeCaptura(int taxaDeCaptura) {
    double alpha = log(0.2) / -255; // Calculando o valor de alpha

    // Usando a fórmula para calcular a probabilidade de sucesso
    double probabilidade = 1 - exp(-alpha * taxaDeCaptura);

    return probabilidade;
}

int main() {
    int taxaDeCaptura;
    int tentativas = 3; // Número de tentativas
    int sucesso = 0; // Variável para acompanhar se a captura foi bem-sucedida

    // Inicialize a semente para geração de números aleatórios
    srand(time(NULL));

    printf("Digite a taxa de captura do Pokemon (0 a 255): ");
    scanf("%d", &taxaDeCaptura);

    if (taxaDeCaptura < 0 || taxaDeCaptura > 255) {
        printf("A taxa de captura deve estar no intervalo de 0 a 255. Encerrando o programa.\n");
        return 1; // Encerra o programa com código de erro
    }

    for (int i = 0; i < tentativas; i++) {
        double probabilidade = calcularProbabilidadeCaptura(taxaDeCaptura);
        printf("Tentativa %d - A probabilidade de sucesso na captura é: %.2f%%\n", i + 1, probabilidade * 100);

        // Gere um número aleatório entre 0 e 100 para simular o resultado da captura
        int resultadoCaptura = rand() % 101;

        if (resultadoCaptura <= probabilidade * 100) {
            printf("Tentativa %d - Você conseguiu capturar o Pokemon com sucesso!\n", i + 1);
            sucesso = 1;
            break; // Saia do loop se a captura for bem-sucedida
        } else {
            printf("Tentativa %d - A captura falhou. O Pokemon escapou.\n", i + 1);
        }
    }

    if (!sucesso) {
        printf("Você usou todas as tentativas e não conseguiu capturar o Pokemon. Melhor sorte na próxima vez!\n");
    }

    return 0;
}
